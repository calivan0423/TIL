




## Energy Detection


장비가 메세지를 보낼려 할 때, 먼저 장비는 수신 모드가 되어 원하는 채널의 신호 에너지 레벨을 탐지하고 평가(예측)합니다.
이 것을 ED energy detection 이라고 합니다.
관심 대역의 신호 에너지는 8개의 신호 기간에 걸쳐 평균화 됩니다.
ED에서 수신자는 신호 타입을 탐지하려고 시도하지 않습니다. ; 단지 신호의 에너지 레벨이 평가됩니다.
즉, 신호가 관심 주파수 밴드를 차지한다면  ED를 수행하는 것으로 신호가 802.15.4의 표준인지 아닌지 드러낼 수 없습니다.

ED 절차는 수신기 감지 레벨과 가까운 에너지 레벨의 약한 신호를 감지할 수 없을 수 있습니다.
수신기 감도는 수신기가 1%미만의 패킷 오류율의 상태로 감지 및 변조할 수 있는 가장 낮은 신호 에너지 레벨입니다.
IEEE 802.15.4는 필요한 수신기 감도 레벨과 필요한 에너지 탐지 레벨 간에 10dB 차이를 허용합니다.
그래서 ED를 수행하는 수신기는 신호 에너지를 감지하고 필요한 감도 수준보다 10dB이상 낮게 측정할 수 있어야 합니다.

MAC 계층은 물리 계층에 ED를 수행하도록 요청 합니다. 
물리 계층은 8비트의 정수로 관심 주파수 채널의 에너지 레벨을 반환합니다.
에너지 정확도 수준은  +- 6dB 이상이어야 합니다.


## Carier Sense

ED와 비슷하게 Cairer Sense CS는 주파수 채널이 사용가능한지 확인하는 방법입니다.
CS에서 장비가 메세지를 전송 하려고 할 때 장비는 먼저 수신모드가 되어 원하는 주파수 채널에서 재연결 될 수 있는 가능한 신호의 유형을 탐지합니다.???
ED와 대조적으로 CS에서 신호는  복조를 통해  신호 변조 및 확산이 현재 장치에서 사용중인 물리 계층의 특성에 준수하는 지 확인힙니다.
만약 점유 신호가 IEEE 802.15.4 PHY를 만족하는 경우 장치는 채널이 에너지 레벨에 관계 없이 사용 중인 것으로 간주 할수 있스니다.


## Link Quality Indicator

  link quality indicator LQI는 순시기로 부터 수신된 데이터 패킷의 품질을 의미 합니다.
  수신된 신호 강도 received signal strength RSS는 신호의 품질을 측정하는데 사용될 수 있습니다.
  RSSS는 수신된 신호의 전체 에너지를 측정한 값입니다.
  신호 대 잡음 비 SNR은 신호 품질을 판단하는 다른 방법입니다. 
  일반적으로 SNR이 높을 수록 패킷 오류 가능성이 낮습니다.
  그래서 높은 SNR의 신호는 고품질 신호로 판단합니다. 링크 품질은 신호에너지를 판단할 수 있을 뿐 아니라 SNR을 판단할 수 있습니다.
  
  
  LQI 측정법은 각 수신 패킷 마다 수행됩니다. LQI는 적어도 8개의 고유한 레벨이 있어야 합니다.
  LQI는 MAC 계층에 보고되고 NWK와 APL 계층에서 모든 유형의 분석에 대해 사용 될 수 있습니다.
  예를 들어 NWK 계층은 보고된 네트워크 장치의 LQI 레벨을 이용하여 메세지를 라우터하는데 사용할 경로를 결정할 수 있습니다. 
  일반적으로 전체 LQI가 가장 높은 길을 통하여 대상에 메세지를 전송할 수 있습니다. LQI는 메세지의 라우트 경로를 결정하는 요소 중 하나 일뿐 입니다.
  경로의 에너지 효율 고려사항 과 같은 다른 요소들도 경로 선택에 영향을 미칩니다.
  예를 들어 배터리 전력 장치는 링크 품질 면에서 우수한 위치에 있을 수 있지만  이 장치를 통해 메세지를 자주 전송하면 동일한 네트워크에 있는 나머지 장치보다 훨씬 더 발리 배터리가 방전 됩니다.
  

##  clear channel assessment

  csma/cs의 첫단계에서 MAC는 PHY에게 타 장비가 채널을 사용 중이 아닌 것을 확인 받기 위하여 CLEAR CHANNEL ASSESSMENT, CCA를 할 것을 요청 합니다.
  CCA는 PHY 관리 서비스의 부분입니다. CCA에서 ED혹은 CS의 결과는 주파수 채널이 사용될수 있는지 없는지 판단하기 위하여 사용될 수 있습니다.
  CCA 기간은 8 주기 여야 합니다...(??)
  
  다음 3가지 CCA 모드가 있고, IEEE 802.15.4. 호환 PHY는 다음 중 하나에서 작동 할 수 있습니다.
  
  
  1. CCA MODE 1
    : 이 모드에서 오직 ED의 결과만 고려됩니다. 만약 에너지 레벨이 ED 임계값을 초과 할 경우 채널은 사용중으로 간주됩니다.
      ED 임계값 레벨은 제조업체가 설정할 수 있습니다.
  
  2. CCA MODE 2
    : 모드 2 는 오직 CS 결과만 고려됩니다. 채널은 점유 신호가 CCA를 수행하는 장비의 PHY를 준수하는 경우에만 사용 중인 것으로 간주 됩니다.
    
  3. CCA MODE 3
    : 이 모드는 모드 1과 모드 2의 논리적인 결합 입니다. 즉, 모드 3에서 PHY는 다음 중 한 가지를 채널의 사용 여부로 간주 할 수 있습니다.
      A. 탐지 에너지 레벨이 임계값을 초과하거고 호환 반송파가 감지 될때. AND
      B. 탐지 에너지 레벨이 임계값을 초과하거나 호환 반송파가 감지 될때. OR
    
  장치가 사용할 CCA 모드는 PHY-PIB(PHY-PIB)에 PHY 속성(PyCCAMode)으로 저장된다.
  
  
  
## THE PHY constants and attibutes

  상수는 프레임의 최대 크기 또는 이벤트의 지속시간과 같은 특성을 정의한다.
  프로토콜의 각 계층은 각자의 상수를 가집니다. PHY 계층은 모직 두 상수를 가집니다. 
  aMaxPHYPacketSize의 phy 상수는 PHY SERVICE DATA UNIT (PSDU)이 127을 초과할 수 없다는 것을 나타 냅니다.
  aTurnaoundTime의 상수는 송수신기가 송/수신 전환 할때 필요한 시간을 나타냅니다. 이 상수에 기초하여 송수긴기는  12개 미만의 기호로 전환을 완료해야 합니다.
  
  물리 계층과 맥 계층에서 모든 상수는 일반 접두사 a를 가집니다.
  반면, 네트워크 계층과 응용 계층에서 상수의 접두사는 각각 nwk와 apsc 입니다. 이는 작동 중에는 바뀔 수 없습니다.
  
  속성은 작동 중 변할 수 있는 변수들 입니다. 
  물리 계층의 속성은 PHY PAN 정보 베이스( PHY-PIB)에 속해 있습니다. 이 속성들은 PHY 서비스를 관리하는데 필요 합니다. 
  PHY-PIB 특성 목록은 ~~ 가 있습니다.
  
  
  
  
