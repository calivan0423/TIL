


Orchestra: Robust Mesh Networks
Through Autonomously Scheduled TSCH



타임슬롯 수행은 높은 신뢰성과 저전력 네트워크의 스케쥴링과 채널 호핑에 입증된 방법이다.
그러나 트래픽 패턴이 주기적으로 정의되어 있지 않고 노드가 다이나믹하게 추가/삭제되는
 다이나믹 네트워크에서의 타임슬롯 적용은 매우 어렵다.

오케스트라에서 노드들은 자율적으로 계산하게 된다. 
센트럴이나 분산 스케쥴러를 필요하지 않고 
이 계획은 오케스트라가 TSCH의 견고함을 이용하면서 결정적이지 않은 네트워크를 구축할 수 있도록 한다.

tsch에서 노드들은 다른 노드의 eb를 듣고 네트워크에 참여한다.
시간 동기는 pan 코디네이터로부터 Directed Acyclic Graph (DAG) 구조를 따라서 leaf노드들에게 전달된다.

시간은 타임슬롯으로 나누어지고 타임슬롯은 여러 개의 슬롯 프레임으로 그룹화 된다.
한 타임슬롯은 노드가 프레임을 보내고 ack를 받을 충분한 시간을 보장하는데 보통 10ms 이다.

tsch에서 스케쥴링을 하는 전형적인 방법은 센터 장비가 네트워크 정보를 모으고 계산하고 각 노드들에게 경로와 스케쥴을 전파하는 것이다.
2013년 개정 이후에는 주변 노드와 협상을 통하여 스케쥴에 슬롯을 추가/제거하기도 한다.


오케스트라는 tsch+RPL 이다.

노드들은 각자 이웃이나 부모의 RPL에 기초하여 지역적, 자동적으로 스케쥴한다.
그 결과 오케스트라는 TSCH를 동기 MAC 계층만큼 유연하게 만들고 랜덤 접근 트래픽을 지원하게 한다.

오케스트라 스케쥴은 다른 길이의 다른 슬롯 프레임을 포함한다.
각 슬폿 프레임은 트래픽의 특정한 타입을 지원한다. ( tsch 비콘, RPL 신호 트래픽 또는 어플리케이션 데이타)
노드는 경쟁을 대폭 줄이거나 없애는 스케쥴 규칙에 따라 슬롯을 선택한다.
따라서 오케스트라는 사전 정의 트래픽 패턴 없이 서로 다른 어플리케이션이 이벤트 기반 데이터를 생성하는 저전력 ipv6시나리오에 특히 유용하다.

오케스트라의 구체적인 스케쥴 예로서
- tsch 비콘을 위한 모든 노드들로부터 자식으로의 전용 브로트캐스트 슬롯
- PRL 신호용 브로드캐스트 + 유니캐스트 를 위해 모든 노드에 공통되는 슬롯
- 모든 노드에서 특정 RPL 부모로의 전용 유니캐스트 슬롯
- 모든 노드에서 각 자식으로의 n개의 전용 유니캐스트 슬롯

오케스트라는 의도하지 않은 동기화 없이 슬롯이 서로 고르게 겹치도록 상호 기본이 되는 슬롯프레임 길이 사용
송/수신의 식별 기능으로서 채널과 시간을 선택하는 것이 key
스케쥴 규칙에 따라 오케스트라는 경쟁이 거의 없거나 프리.


3. A CASE FOR TSCH IN LOW-POWER MESH

글로벌 동기화 비용 :
글로벌 동기화의 오버헤드로 인하여 tdma프로토콜은 랜덤 접근에 비실현적이거나 드문 트래픽 시나리오이다.
tsch에서 노드는 ack 패킷을 수신할때마다 타이머를 재 조정함으로서 동기화를 유지한다. 
노드는 12.5초마다 시간 소스를 이웃과 재동기화 해야한다.
재동기화는 짧은 데이터 패킷을 보내는 것과 짧은 ack를 받는 것을 포함한다.

Scheduled vs. Asynchronous.

첫째, 채널 이용률은 노드가 무선 전송을 하는 데 소요되는 시간의 평균 부분이다. 둘째, 안정적 링크 수, 90% 이상의 PRR(패킷 수신률)과의 링크 총수를 가리킨다.
ContikiMAC는 패킷 스트로빙을 통해 높은 채널 활용도를 유도한다. 즉, 노드당 최대 3%까지이며, 이는 98 노드 테스트베드에서 모든 시점에서 전송되는 평균 3개의 노드에 해당된다.
이에 비해 TSCH와 Always-On 노드는 채널 활용률이 0.08% 미만이며, 이는 37% 개선된 것이다. 이로 인해 경합이 낮아지고, 결과적으로 안정된 링크의 수가 증가한다.


Channel Hopping.

tsch의 본질적 이익은 채널 호핑이다.
채널호핑은 외부간섭과 다중경로 페이딩을 방지하여 채널용량의 증가와 재전송 에너지 소모를 절약한다.
채널 호핑은 동기화 MAC과 비슷한 이익의 효과를 본다. 그러나 추가 동기화 오버헤드 비용이 있다....?

오케스트라의 목적은 TSCH를 동기화 MAC 만큼 유연하게 만드는 것이다. 스케쥴링을 통해 경쟁 감소 및 채널 호핑을 통해 견고성을 이루면서


오케스트라에서 노드는 RPL 토폴로지의 정보를 활용하고 일정 규칙을 준수하여 스케줄을 조정한다. 따라서 주기적인 활동 패턴이 나타나며, 슬롯 프레임과 슬롯은 TSCH 비컨, RPL 신호 또는 응용 프로그램 데이터와 같은 서로 다른 트래픽 플랜에 할당된다.

Network Bootstrap.

전원을 켜면, 노드는 PAN 코디네이터 또는 다른 노드에서 Enchanced Beacon (EB)을 수신할 때까지 listening하면서 TSCH 네트워크에 접속한다. EB와 동기화한 후, 그 노드는 오케스트라를 운영한다.
실행 가능한 오케스트라를 설치하려면 어떤 이웃과도 패킷을 주고받기 위한 슬롯이 필요하다. 이것은 RPL 노드가 이웃을 발견하고 토폴로지를 구축할 수 있도록 모든 이웃에 대한 상시(Always-On) 링크를 에뮬레이션한다.

TSCH-RPL Topology Mapping.

오케스트라는 일관되게 노드의 RPL 선호 부모를 TSCH 시간 소스 이웃로 사용한다. RPL 토폴로지가 진화하고 부모 스위치가 발생하면 노드는 그에 따라 TSCH 시간 소스를 업데이트한다. 이것은 RPL의 내장 루프 회피 메커니즘의 이점을 취하여 루프 없는 타이밍 구조(이 경우 트리)를 산출한다.
또한, 우리는 6TiSCH 아키텍처에서 정의된 RPL 순위를 TSCH 결합 우선순위로 사용한다. 그렇게 함으로써, 우리는 또한 경사도 수렴과 안정성을 위한 RPL 메커니즘의 이점을 취한다. 
노드가 동기화를 상실할 경우 RPL 네트워크도 종료되어 재결합 후 깨끗한 슬레이트 부트스트랩을 확보한다.


TSCH Time Synchronization.

TSCH 시간 동기화는 이웃 시간 소스 패킷(또는 ACK)에서 발생한다. 오케스트라에서 시간 동기화는 주로 주기적인 TSCH와 RPL 비콘 전송을 통해 이루어진다. 이것은 모든 자식 노드들이 단일 브로드캐스트 메시지를 통해 시간 클럭을 업데이트할 수 있기 때문에 효율적이다. 
노드가 주어진 시간 동안 그것의 시간 소스 이웃과 통신하지 않을 때마다(실험에서는 12초를 사용한다), 그것은 유니캐스트 keep-alive 메시지를 보낸다. 
패킷은 승인될 때까지 다시 전송되며, 재동기화는 IEEE802.15.4e 강화 ACK에 포함된 타이밍 정보를 사용하여 수행된다.

Routing-aware Scheduling.

네트워크 수명 동안 오케스트라는 라우팅 계층의 정보를 사용하여 TSCH 스케줄을 설치하고 업데이트한다.
RPL은 수정되지 않고 실행되며, 토폴로지가 진화함에 따라 슬롯이 자동으로 설정되어 네트워크 연결을 보장하고 상위 계층이 투명하게 실행될 수 있다.
기본적인 예로는 오케스트라가 부모의 고유 노드 ID에서 선택한 시간 오프셋과 채널 오프셋에서 일정한 기간(예: 1초)에 반복하여 부모 대 자녀 통신을 위한 전용 슬롯을 유지하는 것이다. 자녀가 부모 노드를 전환할 때마다 새 부모 노드의 ID와 일치하도록 슬롯을 업데이트한다.



Scheduling

오케스트라는 TSCH 슬롯프레임과 슬롯을 라우팅 토폴로지의 함수로 유지하는 방법을 설명하는 배치별 스케줄링 규칙을 실행한다.

Orchestra Slots

우리는 오케스트라의 네 가지 주요 슬롯 유형, 즉 공통 공유 슬롯, 수신자 기반 공유 슬롯, 발신자 기반 공유 슬롯, 송신자 기반 전용 슬롯을 식별한다.
오케스트라는 런타임에 0, 1 또는 여러 TSCH 슬롯으로 동적으로 매핑된다. 

Common Shared Orchestra Slots (CS).

CS 오케스트라 슬롯은 Rx(수신)와 Tx(전송) 모두에 대해 네트워크의 모든 노드가 사용하는 하나의 공유 슬롯으로 구성된다. 슬롯은 고정된 좌표(시간 및 채널 O 설정)에 설치되므로 슬롯화된 ALOHA와 유사한 동작이 발생한다. 이것은 항상 켜져 있는 링크를 에뮬레이션하여 RPL이 이웃을 발견하고 원활하게 실행되도록 한다. TSCH는 유니캐스트 전송이 승인되지 않을 때마다 트리거되는 공유 슬롯의 경합을 해결하기 위해 지수 백오프를 사용한다.

Receiver-based Shared Orchestra Slots (RBS).

RBS는 수신기의 속성에서 파생된 좌표(시간 및 채널 오프셋)에서 두 이웃 간의 통신을 위해 할당된다. 모든 노드에서 RBS 오케스트라 슬롯은 1개의 Rx 슬롯(노드에 따른 좌표)과 1개의 Neighbor당 1개의 Tx 슬롯(이웃에 기반한 좌표)을 생성한다. 슬롯 좌표를 계산하려면 노드의 MAC 주소의 해시를 사용하거나, 슬롯프레임 길이를 변조하거나, 사용 가능한 경우 고유한 노드 식별 피어를 이용할 수 있다.
대표적인 예로 자식 노드와 부모 노드 간의 의사소통 : 노드는 한 슬롯의 모든 트래픽을 수신하고, 자식 노드는 부모 노드로의 전송 슬롯을 유지한다. 노드가 상위 노드를 전환함에 따라 전송 슬롯을 자동으로 업데이트한다. 여러 노드가 동일한 수신기를 향해 슬롯을 설치할 수 있기 때문에 이러한 슬롯에 경합이 발생할 수 있다.

Sender-based Shared Orchestra Slots (SBS).

SBS는 수신기가 아닌 송신기 노드의 속성에서 슬롯 좌표를 얻는다는 점을 제외하면 RBS와 비슷하다. 모든 노드에서 SBS 오케스트라 슬롯은 이웃별 하나의 Rx 슬롯(이웃에 기반한 좌표)과 하나의 Tx 슬롯(발신자 노드 기준의 좌표)이 된다. 이는 RBS보다 높은 에너지 소비량을 초래한다(Tx 슬롯은 트래픽이 없을 때 비용이 들지 않는 반면 Rx 슬롯은 항상 웨이크업을 필요로 한다). 그러나 수신기별 슬롯 할당을 피함으로써 경합 감소를 도울 수도 있다.

예를 들어, 자식 간 통신의 경우, 노드는 하나의 고정된 Tx 슬롯을 가지며, 부모는 각각의 자식에게 Rx 슬롯을 유지한다. 부모로 전환할 때마다 자식은 자신의 전송 슬롯을 업데이트할 필요가 없지만, 이전 부모가 수신 슬롯을 제거하고 새 부모가 새 슬롯을 설치해야 한다. 

Sender-based Dedicated Orchestra Slots (SBD).

모든 노드에 대한 고유한 전송 슬롯을 수용할 수 있을 만큼 충분히 긴 슬롯 프레임에서, 그리고 고유한 노드 식별 피어를 사용할 수 있다고 가정할 때, 경합 없는 통신이 가능하다. 오케스트라는 공유 대신 전용 TSCH 슬롯을 사용하는 것을 제외하면 SBS와 유사한 SBD와 경합 없는 소통을 이뤄낸다. TSCH 전용 슬롯의 경우, 손실된 패킷은 백오프(back-off) 없이 다시 전송된다는 점에 유의(다음 슬롯은 동일한 인접 슬롯을 향함). 
고유한 노드 ID는 배포 시 하드 코딩되거나 네트워크 관리자로부터 런타임에 가져올 수 있다.



Orchestra Slotframes

오케스트라는 모든 노드에서 여러 개의 슬롯프레임을 관리하며, 각 슬롯프레임은 특정 트래픽 플랜(예: TSCH beaconing, 라우팅 트래픽, 애플리케이션)에 할당된다. 슬롯프레임은 슬롯 세트로 구성되며, simple 스케줄링 규칙에 의해 특성이 정의된다. 슬롯프레임은 상호 프라임 기간 동안 반복되며, 독립적으로 사이클을 수행하도록 보장한다. 서로 다른 슬롯프레임의 슬롯이 겹치는 경우, 우선순위가 가장 높은 슬롯프레임의 슬롯이 우선한다. 슬롯프레임의 길이는 트래픽 용량, 네트워크 지연 시간 및 에너지 소비량의 균형을 유도한다.

Traffic Capacity.

