# 전송층 개요.

전송층은 네트워크와 응용층 사이의 계층으로, 종단 간 프로세스-대-프로세스 통신을 제공한다.

## 전송층 서비스

    전송층은 응용층에 서비스를 제공한다.

### 프로세스 간 통신

    네트워크 층은 단지 메세지를 목적지 호스트에게 전달하지만 전송층으 어떠한 프로세스에게 전달 할 것인지에 대한 책임을 가진다.

### 주소 지정 : 포트번호

    하나의 호스트는 여러 프로세스를 사용할 수 있다. 각 프로세스 마다 메세지를 전송할 수 있으므로
    메세지는 호스트에서 다시 어떠한 프로세스로 정확히 전달 되어야 한다.
    이러한 프로세스의 주소를 정의하기 위하여 포트 번호를 사용한다. 
    포트 번호는 well-known , registerd , dynamic 3가지 범위로 분류 된다.
    클랑이언트 호스트는 임시 포트 번호를 사용할지만, 서버 호스트는 잘 알려지 포트 번호만을 사용해야 한다.

### 소켓 주소

    tcp/ip 통신 구조에서 전송층 프로토콜 연결을 위하여 ip주소와 포트 번호의 조합을 사용한다. 
    이러한 조합을 소켓 주소 라고 한다.
    첫 번째 헤더는 ip주소를, 두 번째 헤더는 포트 번호를 포함한다.


### 캡슐화와 캡슐 제거

    송신 측에서 응용층으로 부터 온 메세지를( 프로토콜에 따라 데이터그램, 세그먼트, 패킷 ) 캡슐화하여 네트워크 층으로 전달한다. 
    수신 측에서는 네트워크 층으로 부터 온 데이터를 역 캡슐화하여 응용층으로 전달한다.

### 다중화 및 




# 전송 층 프로토콜

        UDP : 신뢰성 없는 비연결 프로토콜
        TCP : 신뢰성 있는 연결 지향 프로토콜
        SCTP : UDP+TCP
        
## 사용자 데이터그램 프로토콜 UDP

    비연결이고, 신뢰성이 없는 전송 프로토콜
    TCP보다 송/수신자의 상호 작용이 훨씬 적다.

## 사용자 데이터그램

    8바이트로 고정된 크기의 헤더

![image](https://user-images.githubusercontent.com/43804441/51531750-a5a24380-1e81-11e9-8940-a2df88ca5da4.png)

## UDP 서비스

        프로세스 – 프로세스 통신
        비연결 서비스
        흐름제어가 없다.
        오류제어가 없다.
        검사합의 선택적 사용
        혼잡제어가 없다.

## UDP 응용 및 예

        DNS – 비연결 서비스 특징
        실시간 영상 전송 서비스 – 오류제어 결어 특징
        TFTP와 같은 흐름/오류제어를 포함한 프로세스에 사용
        멀티태스킹을 위한 전송에 사용
        SNMP와 같은 관리 프로그램에 사용


## 전송 제어 프로토콜 TCP

        연결 지향, 신뢰성 있는 프로토콜
        신뢰성 제공을 위하여 GBN과 SR프로토콜의 결합 사용

### TCP 서비스

        프로세스 – 프로세스 통신
        스트림 전송 서비스 -> 찾아볼걸
        송신 및 수신 버퍼
        세그먼트 
        전이중통신
        연결 지향 서비스
        신뢰성 있는 서비스

###  TCP 특징

    번호 부여 시스템
	- 순서번호와 확인응답 번호
    초기 바이트  순서 번호
        - 0 ~ 2^32-1 사이 임의 수를 시작 번호로 하는 번호. 
        모든 데이터 바이트에 바이트 번호 부여.
        
                    순서 번호 지정 방법 :
                        첫 세그먼트는 초기 순서 번호로 지정
                        이 후 세그먼트는 이전 세그먼트의 순서번호
                        + 이전 세그먼트에 의해 전송 된 바이트 수
                    확인응답 번호 : 
                        마지막으로 수신된 바이트 번호 + 1

### 세그먼트

	TCP에서의 패킷을 의미하는 단위


### TCP 연결

	 TCP 는 전 이중 모드로 데이터 전송.
	Three-way 핸드셰이킹을 이용하여 연결 설정


### 연결 종료와 절반 폐쇄

	연결 종료 : 
		three way handshaking을 이용하여 구현
	절반 폐쇄 : 
		한 쪽에서 데이터 전송을 중단.


### TCP에서의 윈도우

	바이트 번호를 나타낸다. 
	하나의 타이머만 사용.

### TCP  흐름 제어 

	수신 TCP는 송신 TCP를 제어
	송신 TCP는 송신 프로세스 제어

	윈도의 오른쪽을 움직여 축소하는 것은
	미허용

### Silly Window Sydrome

	전송 프로세스의 데이터 발생 혹은, 수신 프로세스의 데이터 처리가
	반대 쪽에 비하여 느린 경우 네트워크의 효율성에 문제가 발생한다.

	송신 측에서 발생하는 신드롬 :
		너무 적은 데이터를 생산하는 경우
		적은 데이터를 위한 큰 헤더를 포함하는 많은 세그먼트 발생
		네이글 알고리즘으로 해결

	수신 측에서 발생하는 신드롬 : 
		너무 적은 양만 처리하는 경우
		네트워크 트래픽 문제 발생
		클라크 해결 법으로 해결

### 오류제어

	TCP 는 신뢰서 있는 전송을 서비스 하기 위하여 오류 제어 기능을 포함.

	검사 합, 확인응답, 타임 아웃 등을 통하여 오류 제어를 수행한다.


	검사 합 : 검사 합 필드의 정보를 통하여 오류를 계산

	확인 응답 :  순서번호를 소비하지 않는 ACK 세그먼트를 통하여 오류 제어
		누적 확인응답과 선택 확인응답 방법이 있음.

	타임 아웃 : 타이머를 통하여 오류를 제어
